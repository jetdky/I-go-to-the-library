# “我去图书馆”抢座脚本   
*本项目灵感来自于wheee/RenjiaLu（虽然dalao并没有怎么理我）*     
*最近图书馆采用了“我去图书馆”座位管理系统，而这个座位管理系统与我未实现的某个项目高度相似。为了技术的尊严，决定用python写一个小脚本来抢座。经过一番搜索后发现知乎“二叉树”曾经写过一个类似的项目并且开源到了github。也还好“我去图书馆”的数据包到现在还没有加密，于是我基于他的代码，成功敲出了这个抢座脚本。现在也把我的代码开源，供大家一起研究。*     
**【2018-10-5】截止到目前，代码仍然能成功在武汉体育学院图书馆运行**   
**【基本思路】**   
登录微信公众号时，用fiddler抓取headers获得cookies，再调用python的request库中的get()，将座位数据直接get给服务器
**【操作过程】**      
1.提前半个小时（实测一个小时也行）使用fiddler抓取登录公众号时的cookies    
2.在脚本中填上自己的cookies    
3.在脚本中填上自己想预定的自习室和座位号   
4.cmd下运行脚本    
**【注意】**       
0.零基础想使用本脚本，先去看Python的基本语法（推荐廖雪峰老师的python教程），爬虫基础知识以及Python的request库和urllib库的使用（推荐博客：https://cuiqingcai.com）     
1.目前还需要手动抓取cookies   
2.目前只能在预约开放前几秒，手动多次运行代码抢座   
3.实测在一分钟内若多次对服务器发起GET，预约时将会出现验证码。出现验证码后代码将失效，不过这个状态会在大概10分钟后消失    
4.预约成功后，代码可能会没有提示     
5.其他学校运行此代码需要更改座位标识号（座位标识号用fiddler抓取即可）     
**【有问题欢迎私信】**     
简书：日兮夜兮酒兮  
知乎：日兮夜兮酒兮  
（随缘在线答疑解惑）   
**【更新 2018-10-5】**     
0.微调文字说明
1.现在预约成功会有正确的提示了。修复了之前预约成功不能正确提示的小bug    
2.将新上传的bat文件加入系统计划任务，即可实现定时自动抢座（需要先更改bat文件中脚本的具体路径，右键bat文件->编辑，在start python 后面填上reserve_seat.py文件的路径即可）       
**【自动化抢座思路 2018-10-10】**      
1.Python模拟点击进入公众号得到cookies  
2.fiddler将抓到的cookies存入文件    
3.脚本从文件中读取cookies   
4.抢座
